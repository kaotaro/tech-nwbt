{"name":"[実習1]Bluetooth機能を制御する","tagline":"ネットワーク（４）Bluetooth","body":"# 準備\r\nzipファイルを解答して「BluetoothPractice1」プロジェクトをAndroidStudioで開く。\r\n\r\n# 1.Bluetooth機能を有効にする\r\n\r\n## AndroidManifest.xml\r\nAndroidManifest.xmlにパーミッションを追加する。\r\n\r\n```\r\n<uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\"/>\r\n<uses-permission android:name=\"android.permission.BLUETOOTH\"/>\r\n```\r\n\r\n## MainActivity.javaのコードを埋める\r\n\r\n**initEnableButton()** メソッドを完成させます。\r\n\r\n①BluetoothAdapterのインスタンス取得をするコードを(en1-1)に書きましょう。\r\n\r\n```\r\nbtAdapter = BluetoothAdapter.getDefaultAdapter();\r\n```\r\n\r\n②1で取得したインスタンスの状態によって処理を分け、適切なToastや処理を(en1-2)に実装します。\r\n\r\n```\r\nif (btAdapter == null) {\r\n\tToast.makeText(getApplicationContext(),\r\n             “この端末はBluetoothがサポートされていません。”,\r\n　　　　　　　Toast.LENGTH_SHORT).show();\r\n\treturn;\r\n}\r\nif (btAdapter.isEnabled()) {\r\n\tToast.makeText(getApplicationContext(),\r\n\t  \"Bluetoothは既に有効になっています。\", Toast.LENGTH_SHORT)\r\n\t  .show();\r\n}else {\r\n\t// Bluetooth機能を有効にするためのアクションインテントを発行\r\n\tIntent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n\t// onActivityResultメソッドで結果を受けとるようにする\r\n\tstartActivityForResult(intent, REQUEST_BT_ENABLE);\r\n}\r\n```\r\n③onActivityResultコールバックメソッドを(en1-3) に実装します。\r\n①で実装したBluetooth機能を有効にするインテントを発行後の結果を受け取ります。\r\n```\r\n@Override\r\nprotected void onActivityResult(int reqestCode, \r\n\t\t\t\tint resultCode, Intent data) {\r\n   if (reqestCode == REQUEST_BT_ENABLE) {\r\n\tif (resultCode == Activity.RESULT_OK) {\r\n\t\tToast.makeText(getApplicationContext(),\r\n\t\t\t\"Bluetoothを有効にしました。”,\tToast.LENGTH_SHORT).show();\r\n\t} else {\r\n\t\tToast.makeText(getApplicationContext(), \r\n\t\t\t\"Bluetooth有効に失敗しました。\",Toast.LENGTH_SHORT).show();\r\n\t}\r\n\treturn;\r\n   }\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}